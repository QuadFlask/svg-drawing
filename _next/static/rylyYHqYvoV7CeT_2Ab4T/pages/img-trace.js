(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4qVD":function(t,n,e){"use strict";e.r(n);var r=e("lEbO");var o=e("HO86");function i(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var s=e("ERkP"),l=e.n(s),u=e("S95l"),h=e("p6XQ"),c=e("apO0"),p=l.a.createElement;function d(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?d(Object(e),!0).forEach((function(n){a(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var g=["/img_trace/cat.jpg","/img_trace/harinezumi.jpg","/img_trace/kuma.jpg","/img_trace/panda.png","/img_trace/risu.jpg","/img_trace/tanuki.jpg"].map((function(t){return"/svg-drawing".concat(t)})),b=[{r:0,g:0,b:0,a:255},{r:50,g:50,b:50,a:255},{r:100,g:100,b:100,a:255},{r:150,g:150,b:150,a:255},{r:200,g:200,b:200,a:255}];n.default=function(){var t=Object(s.useState)(g),n=t[0],e=t[1],r=Object(s.useState)(b),o=r[0],a=r[1],l=Object(s.useState)(),d=l[0],v=l[1],m=Object(s.useState)({numberOfColors:8,colorQuantCycles:3})[0],y=Object(s.useState)({radius:20,delta:0})[0],x=Object(s.useState)({})[0],w=Object(s.useState)(g[0]),O=w[0],_=w[1],j=Object(s.useState)(""),M=j[0],C=j[1],P=Object(s.useState)(),k=P[0],S=P[1],I=Object(s.useRef)(null),q=Object(s.useRef)(null),D=Object(s.useRef)(null),A=Object(s.useCallback)((function(t){C(t.target.value)}),[C]),E=Object(s.useCallback)((function(){d&&a(h.Palette.imageData(d,m))}),[m,a,d]),Q=Object(s.useCallback)((function(){a(b)}),[a]),T=Object(s.useCallback)((function(t){return function(){var n=o.filter((function(n,e){return e!==t}));a(n)}}),[a,o]),L=Object(s.useCallback)((function(){if(d){var t=new h.ImgTrace(f(f({},x),{},{palettes:o})),n=t.load(d);if(S(n),t.palettes&&a(t.palettes),D.current){var e=new u.Renderer(D.current);e.copy(n),e.update()}}}),[d,o,x]),R=Object(s.useCallback)((function(){if(d){var t=new h.Blur(y).apply(d);if(v(t),q.current){q.current.width=t.width,q.current.height=t.height;var n=q.current.getContext("2d");null===n||void 0===n||n.putImageData(t,0,0,0,0,t.width,t.height)}}}),[d,y]),U=Object(s.useCallback)((function(t){return function(){_(t),n.includes(t)||e([].concat(i(n),[t]))}}),[_,n]),W=Object(s.useCallback)((function(){k&&k.download()}),[k]);return Object(s.useEffect)((function(){I.current&&(I.current.onload=function(){I.current&&new h.ImgLoader({corsenabled:!0}).fromImageElement(I.current,v)})}),[v]),p(c.a,null,p("div",{style:{display:"flex",justifyContent:"start",flexWrap:"wrap"}},p("ul",null,p("li",null,p("input",{type:"text",placeholder:"input image url",value:M,onChange:A}),p("button",{onClick:U(M)},"Load image url")),n.map((function(t,n){return p("li",{style:{cursor:"pointer"},key:n},p("div",{onClick:U(t)},t))}))),p("div",null,p("button",{onClick:E},"Load Image Palette!"),p("button",{onClick:Q},"GrayScale Palette!"),p("div",{style:{display:"flex",justifyContent:"start",padding:"2px 0"}},o.sort((function(t,n){return t.r+t.g+t.b>n.r+n.g+n.b?-1:1})).map((function(t,n){return p("div",{key:n,style:{width:30,height:30,margin:2,position:"relative",backgroundColor:"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(t.a/255,")")}},p("div",{style:{position:"absolute",background:"#fff",bottom:2,left:2,width:8,lineHeight:"8px",textAlign:"center",fontSize:3,cursor:"pointer"},onMouseUp:T(n)},"x"))}))))),p("button",{onClick:R},"Blur Image!"),p("button",{onClick:L},"Image Trace!"),k&&p("button",{onClick:W},"Download"),p("div",{style:{display:"flex",justifyContent:"start",flexWrap:"wrap"}},p("div",{style:{width:"30vw"}},p("img",{style:{maxWidth:"100%"},ref:I,crossOrigin:"anonymous",src:O,alt:""})),p("div",{style:{width:"30vw"}},p("canvas",{style:{width:"100%"},ref:q})),p("div",{style:{width:"30vw"},ref:D})))}},p6XQ:function(t,n,e){!function(t,n){"use strict";var e=function(t,n,e){return function(t){function n(){return t.exports=n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},n.apply(this,arguments)}t.exports=n}(e={path:void 0,exports:{},require:function(t,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==n&&e.path)}},e.exports),e.exports}(),r=function(t){var n=t.width*t.height;if(!(t.data.length<4*n))return t;for(var r=new Uint8ClampedArray(4*n),o=0;o<n;o++)r[4*o]=t.data[3*o],r[4*o+1]=t.data[3*o+1],r[4*o+2]=t.data[3*o+2],r[4*o+3]=255;return e({},t,{data:r})},o=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]],i=function(){function t(t){var n=t.radius,e=t.delta;this.radius=null!=n?n:0,this.delta=null!=e?e:20}return t.prototype.apply=function(t){var n=r(t),e=new Uint8ClampedArray(n.data),i=Math.floor(this.radius);if(i<1)return n;i>o.length&&(i=o.length);var a=Math.abs(this.delta);a>1024&&(a=1024);for(var s=o[i-1],l=0;l<n.height;l++)for(var u=0;u<n.width;u++){for(var h=0,c=0,p=0,d=0,f=0,g=-i;g<i+1;g++)if(u+g>0&&u+g<n.width){var b=4*(l*n.width+u+g);h+=n.data[b]*s[g+i],c+=n.data[b+1]*s[g+i],p+=n.data[b+2]*s[g+i],d+=n.data[b+3]*s[g+i],f+=s[g+i]}var v=4*(l*n.width+u);e[v]=Math.floor(h/f),e[v+1]=Math.floor(c/f),e[v+2]=Math.floor(p/f),e[v+3]=Math.floor(d/f)}for(var m=new Uint8ClampedArray(e),y=0;y<n.height;y++)for(var x=0;x<n.width;x++){for(var w=0,O=0,_=0,j=0,M=0,C=-i;C<i+1;C++)if(y+C>0&&y+C<n.height){var P=4*((y+C)*n.width+x);w+=m[P]*s[C+i],O+=m[P+1]*s[C+i],_+=m[P+2]*s[C+i],j+=m[P+3]*s[C+i],M+=s[C+i]}var k=4*(y*n.width+x);e[k]=Math.floor(w/M),e[k+1]=Math.floor(O/M),e[k+2]=Math.floor(_/M),e[k+3]=Math.floor(j/M)}for(var S=0;S<n.height;S++)for(var I=0;I<n.width;I++){var q=4*(S*n.width+I);Math.abs(e[q]-n.data[q])+Math.abs(e[q+1]-n.data[q+1])+Math.abs(e[q+2]-n.data[q+2])+Math.abs(e[q+3]-n.data[q+3])>a&&(e[q]=n.data[q],e[q+1]=n.data[q+1],e[q+2]=n.data[q+2],e[q+3]=n.data[q+3])}return new ImageData(e,n.width,n.height)},t}(),a=function(){function t(t){var n;this.corsenabled=null==(n=t.corsenabled)||n}var n=t.prototype;return n.fromUrl=function(t,n){var e=this,r=function(n,r){var o=new Image;e.corsenabled&&(o.crossOrigin="Anonymous"),o.onload=function(){e.fromImageElement(o,n)},o.onerror=function(t){r?r(t):console.error(t)},o.src=t};if(!n)return new Promise(r);r(n)},n.fromImageElement=function(t,n){var e=function(n,e){var r=document.createElement("canvas");r.width=t.naturalWidth||t.width,r.height=t.naturalHeight||t.height;var o=r.getContext("2d");null==o||o.drawImage(t,0,0);var i=null==o?void 0:o.getImageData(0,0,r.width,r.height);if(!i){if(e)return void e("error canvas context.");throw"error canvas context."}n(i)};n?e(n):new Promise(e)},t}(),s=function(){function t(){}return t.imageData=function(t,n){for(var e=void 0===n?{}:n,o=e.numberOfColors||16,i=e.colorQuantCycles||3,a=r(t),s=this._deterministic(a,o),l=[],u=0;u<i;u++){if(u>0)for(var h=0;h<s.length;h++)l[h].n>0&&(s[h]={r:Math.floor(l[h].r/l[h].n),g:Math.floor(l[h].g/l[h].n),b:Math.floor(l[h].b/l[h].n),a:Math.floor(l[h].a/l[h].n)});l=Array.from({length:s.length},(function(){return{r:0,g:0,b:0,a:0,n:0}}));for(var c=0;c<a.height;c++)for(var p=function(t){var n=4*(c*a.width+t),e=1024,r=s.reduce((function(t,r,o){var i=Math.abs(r.r-a.data[n])+Math.abs(r.g-a.data[n+1])+Math.abs(r.b-a.data[n+2])+Math.abs(r.a-a.data[n+3]);return i<e?(e=i,o):t}),0);l[r].r+=a.data[n],l[r].g+=a.data[n+1],l[r].b+=a.data[n+2],l[r].a+=a.data[n+3],l[r].n+=1},d=0;d<a.width;d++)p(d)}return s},t._deterministic=function(t,n){for(var e=[],r=Math.ceil(Math.sqrt(n)),o=Math.ceil(n/r),i=t.width/(r+1),a=t.height/(o+1),s=0;s<o;s++)for(var l=0;l<r&&e.length!==n;l++){var u=4*Math.floor((s+1)*a*t.width+(l+1)*i);e.push({r:t.data[u],g:t.data[u+1],b:t.data[u+2],a:t.data[u+3]})}return e},t.number=function(t){if(void 0===t&&(t=16),t<8)return this.grey(t);for(var n=[],e=Math.floor(Math.pow(t,1/3)),r=Math.floor(255/(e-1)),o=0;o<e;o+=1)for(var i=0;i<e;i+=1)for(var a=0;a<e;a+=1)n.push({r:o*r,g:i*r,b:a*r,a:255});for(var s=t-e*e*e,l=0;l<s;l++)n.push({r:Math.floor(255*Math.random()),g:Math.floor(255*Math.random()),b:Math.floor(255*Math.random()),a:Math.floor(255*Math.random())});return n},t.grey=function(t){void 0===t&&(t=16);for(var n=[],e=Math.floor(255/(t-1)),r=0;r<t;r++)n.push({r:r*e,g:r*e,b:r*e,a:255});return n},t}(),l=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]],u=[{r:0,g:0,b:0,a:255},{r:50,g:50,b:50,a:255},{r:100,g:100,b:100,a:255},{r:150,g:150,b:150,a:255},{r:200,g:200,b:200,a:255}],h=function(){function t(t){var n,r,o,i,a;void 0===t&&(t={}),this.ltres=null!=(n=t.ltres)?n:1,this.qtres=null!=(r=t.qtres)?r:1,this.rightangleenhance=null==(o=t.rightangleenhance)||o,this.pathOmit=null!=(i=t.pathOmit)?i:8,this.commandOmit=null!=(a=t.commandOmit)?a:0,this.pathAttrs=e({strokeWidth:"1"},t.pathAttrs||{}),this.palettes=t.palettes||u}var o=t.prototype;return o.load=function(t){for(var e=r(t),o=this._colorQuantization(e),i=[],a=0;a<this.palettes.length;a++){var s=this._edgeDetection(o,a),l=this._pathScan(s),u=this._interpolation(l).map(this._tracePath.bind(this));i.push(u)}var h=this._createPaths(i);return new n.Svg({width:o[0].length-2,height:o.length-2}).addPath(h)},o._colorQuantization=function(t){var n=this;return Array.from({length:t.height+2},(function(e,r){return Array.from({length:t.width+2},(function(e,o){if(0===o||o===t.width+1||0===r||r===t.height+1)return-1;var i=o-1,a=4*((r-1)*t.width+i);return n._findPaletteIndex({r:t.data[a],g:t.data[a+1],b:t.data[a+2],a:t.data[a+3]})}))}))},o._findPaletteIndex=function(t){var n=t.r,e=t.g,r=t.b,o=t.a,i=1024;return this.palettes.reduce((function(t,a,s){var l=Math.abs(a.r-n)+Math.abs(a.g-e)+Math.abs(a.b-r)+Math.abs(a.a-o);return l<i?(i=l,s):t}),0)},o._edgeDetection=function(t,n){for(var e=[],r=t.length,o=t[0].length,i=0;i<r;i++){e[i]=[];for(var a=0;a<o;a++)e[i][a]=0===i||0===a?0:(t[i-1][a-1]===n?1:0)+(t[i-1][a]===n?2:0)+(t[i][a-1]===n?8:0)+(t[i][a]===n?4:0)}return e},o._pointpoly=function(t,n){for(var e=!1,r=0,o=n.length-1;r<n.length;o=r++)e=n[r].y>t.y!=n[o].y>t.y&&t.x<(n[o].x-n[r].x)*(t.y-n[r].y)/(n[o].y-n[r].y)+n[r].x?!e:e;return e},o._pathScan=function(t){for(var n=t[0].length,e=t.length,r=[],o=0,i=0;i<e;i++)for(var a=0;a<n;a++){var s=t[i][a];if(4===s||11===s){var u=a,h=i,c=1,p=0,d=!1;for(r[o]={points:[],boundingbox:[u,h,u,h],holechildren:[],isholepath:!1};!d;){r[o].points[p]={x:u-1,y:h-1,direction:-1},u-1<r[o].boundingbox[0]&&(r[o].boundingbox[0]=u-1),u-1>r[o].boundingbox[2]&&(r[o].boundingbox[2]=u-1),h-1<r[o].boundingbox[1]&&(r[o].boundingbox[1]=h-1),h-1>r[o].boundingbox[3]&&(r[o].boundingbox[3]=h-1);var f=l[t[h][u]][c];if(t[h][u]=f[0],c=f[1],u+=f[2],h+=f[3],u-1===r[o].points[0].x&&h-1===r[o].points[0].y)if(d=!0,r[o].points.length<this.pathOmit)r.pop();else{if(11===s){r[o].isholepath=!0;for(var g=0,b=[-1,-1,n+1,e+1],v=0;v<o;v++)!r[v].isholepath&&this._boundingboxincludes(r[v].boundingbox,r[o].boundingbox)&&this._boundingboxincludes(b,r[v].boundingbox)&&this._pointpoly(r[o].points[0],r[v].points)&&(g=v,b=r[v].boundingbox);r[g].holechildren.push(o)}o++}p++}}}return r},o._boundingboxincludes=function(t,n){return t[0]<n[0]&&t[1]<n[1]&&t[2]>n[2]&&t[3]>n[3]},o._interpolation=function(t){for(var n=[],e=0,r=0,o=0,i=0,a=0;a<t.length;a++){n[a]={points:[],boundingbox:t[a].boundingbox,holechildren:t[a].holechildren,isholepath:t[a].isholepath};for(var s=t[a].points.length,l=0;l<s;l++)e=(l+1)%s,r=(l+2)%s,o=(l-1+s)%s,i=(l-2+s)%s,this.rightangleenhance&&this._testrightangle(t[a],i,o,l,e,r)&&(n[a].points.length>0&&(n[a].points[n[a].points.length-1].direction=this._getdirection(n[a].points[n[a].points.length-1].x,n[a].points[n[a].points.length-1].y,t[a].points[l].x,t[a].points[l].y)),n[a].points.push({x:t[a].points[l].x,y:t[a].points[l].y,direction:this._getdirection(t[a].points[l].x,t[a].points[l].y,(t[a].points[l].x+t[a].points[e].x)/2,(t[a].points[l].y+t[a].points[e].y)/2)})),n[a].points.push({x:(t[a].points[l].x+t[a].points[e].x)/2,y:(t[a].points[l].y+t[a].points[e].y)/2,direction:this._getdirection(t[a].points[l].x+t[a].points[e].x,t[a].points[l].y+t[a].points[e].y,t[a].points[e].x+t[a].points[r].x,t[a].points[e].y+t[a].points[r].y)})}return n},o._testrightangle=function(t,n,e,r,o,i){return t.points[r].x===t.points[n].x&&t.points[r].x===t.points[e].x&&t.points[r].y===t.points[o].y&&t.points[r].y===t.points[i].y||t.points[r].y===t.points[n].y&&t.points[r].y===t.points[e].y&&t.points[r].x===t.points[o].x&&t.points[r].x===t.points[i].x},o._getdirection=function(t,n,e,r){return t<e?n<r?1:7:t>e?n<r?3:n>r?5:4:n<r?2:n>r?6:8},o._tracePath=function(t){for(var e=0,r=[],o=[];e<t.points.length;){for(var i=t.points[e].direction,a=-1,s=e+1;(t.points[s].direction===i||t.points[s].direction===a||-1===a)&&s<t.points.length-1;)t.points[s].direction!==i&&-1===a&&(a=t.points[s].direction||0),s++;s===t.points.length-1?(r.push.apply(r,this._fitseq(t,e,0)),o.push.apply(o,this._fitseq(t,e,0,!0)),e=t.points.length):(r.push.apply(r,this._fitseq(t,e,s)),o.push.apply(o,this._fitseq(t,e,s,!0)),e=s)}var l=[new n.Command("M",[t.points[0].x,t.points[0].y])].concat(r,[new n.Command("Z")]);return o.reverse(),{commands:l,holeCommands:[new n.Command("M",o[o.length-1].value.slice(0,2))].concat(o,[new n.Command("Z")]),holechildren:t.holechildren,isholepath:t.isholepath}},o._fitseq=function(t,e,r,o){var i=this.ltres,a=this.qtres;if(r>t.points.length||r<0)return[];var s,l,u,h=e,c=0,p=!0,d=r-e;d<0&&(d+=t.points.length);for(var f=(t.points[r].x-t.points[e].x)/d,g=(t.points[r].y-t.points[e].y)/d,b=(e+1)%t.points.length;b!=r;){var v=b-e;v<0&&(v+=t.points.length),s=t.points[e].x+f*v,l=t.points[e].y+g*v,(u=(t.points[b].x-s)*(t.points[b].x-s)+(t.points[b].y-l)*(t.points[b].y-l))>i&&(p=!1),u>c&&(h=b,c=u),b=(b+1)%t.points.length}if(p)return[new n.Command("L",o?[t.points[e].x,t.points[e].y]:[t.points[r].x,t.points[r].y])];var m=h;p=!0,c=0;var y=(m-e)/d,x=(1-y)*(1-y),w=2*(1-y)*y,O=y*y,_=(x*t.points[e].x+O*t.points[r].x-t.points[m].x)/-w,j=(x*t.points[e].y+O*t.points[r].y-t.points[m].y)/-w;for(b=e+1;b!=r;)w=2*(1-(y=(b-e)/d))*y,O=y*y,s=(x=(1-y)*(1-y))*t.points[e].x+w*_+O*t.points[r].x,l=x*t.points[e].y+w*j+O*t.points[r].y,(u=(t.points[b].x-s)*(t.points[b].x-s)+(t.points[b].y-l)*(t.points[b].y-l))>a&&(p=!1),u>c&&(h=b,c=u),b=(b+1)%t.points.length;if(p)return[new n.Command("Q",[_,j,t.points[r].x,t.points[r].y])];var M=m;return this._fitseq(t,e,M,o).concat(this._fitseq(t,M,r,o))},o._complementCommand=function(t,n){for(var e=t[n],r=[],o=0;o<e.holechildren.length;o++)r.push.apply(r,t[e.holechildren[o]].holeCommands);return r},o._createPaths=function(t){for(var r=[],o=0;o<t.length;o++)for(var i=0;i<t[o].length;i++){var a=t[o],s=a[i];if(!(s.isholepath||s.commands.length<this.commandOmit)){var l=this.palettes[o],u="rgb("+l.r+", "+l.g+", "+l.b+")",h=new n.Path(e({},this.pathAttrs,{stroke:u,fill:u,opacity:String(l.a/255)}));h.addCommand([].concat(s.commands,this._complementCommand(a,i))),r.push(h)}}return r},t}();t.Blur=i,t.ImgLoader=a,t.ImgTrace=h,t.Palette=s,Object.defineProperty(t,"__esModule",{value:!0})}(n,e("S95l"))},qenh:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/img-trace",function(){return e("4qVD")}])}},[["qenh",0,2,1,3,4]]]);